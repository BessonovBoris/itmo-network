# Теория


### *1. По какому протоколу работает утилита mtr? Как это можно определить?*

`mtr` (My Traceroute) использует протокол ICMP (Internet Control Message Protocol), аналогичный тому, который используется
в утилите ping. Это можно определить, запустив mtr и проверив тип пакетов, передаваемых в сети, либо отслеживая трафик в 
сетевом анализаторе (например, Wireshark), где будет видно использование ICMP. В некоторых конфигурациях mtr может также 
использовать UDP для выполнения трассировки.

### *2. Опишите значения столбцов статистики, выводимой утилитой mtr. Какие еще статистики доступны в mtr кроме основных?*

Основные столбцы в выводе `mtr`:

1. Loss% — процент потерь пакетов, показывает стабильность связи.
2. Snt — количество отправленных пакетов к каждому узлу.
3. Last — время отклика на последний пакет.
4. Avg — среднее время отклика.
5. Best — минимальное время отклика.
6. Wrst — максимальное время отклика.

> Помимо основных, mtr может предоставлять статистику по TCP и UDP, а также может включать такие данные, как время перехода 
через каждый узел и данные о jitter (колебания задержки).

### *3. Какие типы кадров Ethernet бывают, в чем их отличия?*

Основные типы кадров Ethernet:

- Ethernet II — наиболее распространённый тип кадра, использующийся в современных сетях; содержит поле EtherType, которое
                 идентифицирует протокол сетевого уровня (например, IPv4 или IPv6).
- IEEE 802.3 — включает в себя поле длины вместо EtherType; обычно применяется с фреймами IEEE 802.2 LLC.
- SNAP (Subnetwork Access Protocol) — расширение IEEE 802.3, используется для поддержки нестандартных протоколов.

Различия заключаются в использовании EtherType или поля длины, а также в совместимости с определёнными сетевыми протоколами 
и стандартами.

### *4. Какой тип кадров Ethernet используется в анализируемой сети? Почему именно его применение позволяет сети функционировать?*

Чаще всего в современных сетях используется тип Ethernet II, так как он оптимизирован для IP-протоколов, которые составляют 
основу большинства сетевых коммуникаций. Использование EtherType позволяет маршрутизаторам и коммутаторам правильно 
обрабатывать IP-пакеты и другие данные на уровне сети, обеспечивая их корректную маршрутизацию и передачу.


### *5. Как можно определить тип используемого коммутационного оборудования, используя сетевую статистику?*

Тип оборудования можно предположить на основе анализа данных о задержках, потерях пакетов и типах протоколов. Например:

- Коммутаторы уровня 2 обычно не показывают значительных задержек или манипуляций с IP-пакетами, но могут ограничивать пропускную способность и увеличивать задержки при высокой нагрузке.
- Коммутаторы уровня 3 могут добавлять заметные задержки на узлах, особенно если в сети используются маршрутизация и NAT.

### *6. На какие адреса сетевого уровня осуществляются широковещательные рассылки?*

В IPv4 широковещательные рассылки осуществляются на адреса с последним октетом 255, например, 192.168.1.255. В IPv6 
широковещательные рассылки заменены на групповые адреса (мультикаст), такие как `ff02::1`, для рассылки на все узлы в 
пределах локальной сети.


### *7. На какой канальный адрес осуществляются широковещательные рассылки?*
На канальном уровне (уровне Ethernet) широковещательные рассылки осуществляются на специальный широковещательный MAC-адрес:
```
FF:FF:FF:FF:FF:FF
```
Этот адрес представляет собой 48-битный адрес, в котором все биты установлены в 1, и он используется для передачи данных 
всем устройствам в пределах одной локальной сети. Когда Ethernet-кадр отправляется с этим MAC-адресом назначения, он доставляется 
всем узлам в пределах того же сегмента сети, что позволяет осуществить широковещательную рассылку.


### *8. Для чего применяются перехваченные широковещательные рассылки в Части 3?*
```хз, допишем потом```
### *9. В Части 4 при разном использовании утилиты traceroute вы получили разные данные.Почему?*
Потому что использовались разные протоколы: TCP, UDP, ICMP

### *10. Как изменяется загрузка интерфейса в Части 5. п. 3? Почему?*
```хз, допишем в будущем```
### *11. Какие выводы вы сделали в Части 7, п.4?*
```хз, допишем, как рак на горе свистнет```
### *12. На каком уровне модели OSI работает vnstat?*
vnstat ведет лог по выбранному сеетвому интерфейсу, поэтому задействуется 2-ой уровень OSI - канальный


# Основные термины


### *1. Broadcast трафик, адреса, назначение*
- __Broadcast-трафик__ – это тип сетевого трафика, предназначенный для передачи всем устройствам в пределах одной локальной сети.
- __Канальный уровень:__ широковещательные рассылки выполняются на адрес `FF:FF:FF:FF:FF`.
- __Сетевой уровень (IPv4):__ широковещательный IP-адрес, как правило, имеет последний октет 255, например 192.168.1.255.
- __Назначение:__ используется для передачи данных, которые должны быть получены всеми устройствами в сети, например, при ARP-запросах или DHCP-распределении IP-адресов.

### *2. Утилиты traceroute и mtr, смысл выводимых значений*

- `traceroute` и `mtr` используются для определения маршрута, по которому пакеты проходят от источника к назначению.
- `traceroute` отправляет последовательность пакетов с увеличивающимся значением TTL (время жизни), фиксируя каждый промежуточный узел.
- `mtr` (My Traceroute) — комбинирует функциональность ping и traceroute, выводя статистику потерь и задержек по каждому узлу в режиме реального времени.
```
Основные значения в выводе mtr:
Loss% — процент потерянных пакетов.
Snt — отправленные пакеты.
Last, Avg, Best, Wrst — время отклика на последний, средний, минимальный и максимальный пакеты соответственно.
StDev — стандартное отклонение задержки, показатель стабильности соединения.
```

### *3. Утилиты lsof, netstat, ss. Получение информации о прослушиваемых портах и активных соединениях*

- __lsof__ (List Open Files) — утилита для вывода информации об открытых файлах и сетевых соединениях, позволяет определить, какие порты слушаются, и какие процессы их занимают (lsof -i).
- __netstat__ — показывает сетевую статистику, информацию о подключениях, маршрутах, интерфейсах и прослушиваемых портах (netstat -tuln для прослушиваемых портов).
- __ss__ — более современная альтернатива netstat, с большей точностью выводит информацию о сетевых соединениях и прослушиваемых портах (ss -tuln).

### *4. Понятие сокета*

__Сокет__ — это программный интерфейс для установления связи между двумя узлами через сетевой протокол. Сокет определяет 
комбинацию IP-адреса и порта, что позволяет процессу принимать и отправлять данные по сети.

### *5. Инкапсуляция при передаче сообщений*

__Инкапсуляция__ — процесс упаковки данных одного уровня сетевой модели (например, данных приложения) в протоколы нижележащих уровней. 
При передаче сообщения данные инкапсулируются в пакеты транспортного уровня (TCP/UDP), затем добавляются IP-заголовки (сетевой уровень), 
и наконец, MAC-адреса (канальный уровень).

### *6. MAC-адрес*

__MAC-адрес__ (Media Access Control) — уникальный идентификатор сетевого устройства на канальном уровне, представленный в 
формате 48-битного числа, обычно записывается в виде шестнадцатеричного кода (например, _00:1A:2B:3C:4D:5E_). MAC-адрес используется для адресации в пределах локальной сети.


### *7. Простые фильтры по адресам и портам в __Wireshark__ и __tcpdump__*

Wireshark и tcpdump позволяют задавать фильтры для отображения или захвата только определённого трафика.
- __Фильтрация по IP-адресу:__ `ip.addr == 192.168.1.1`.
- __Фильтрация по порту:__ `tcp.port == 80 или udp.port == 53`.
- __Комбинированные фильтры:__ `ip.src == 192.168.1.1 and tcp.dstport == 80`

